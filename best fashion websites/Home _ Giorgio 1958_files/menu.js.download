var t_i = null;
var sMenuIsOpen = false;
var const_scrollMClose = 105;
var const_scrollMOpen = 260;
var cont_sc_close = 310;
var self = null;
var i = null;


function scrollControll(sc, m) {
    if (m) {
        if (sc > const_scrollMOpen) {
            $('.top_h').removeClass('h').addClass('show');
            $('#expanded_header').addClass('h').removeClass('show');
        } else {
            $('.top_h').removeClass('show').addClass('h');
            $('#expanded_header').removeClass('h').addClass('show');
        }
    } else {
        //console.log(sc);
        if (sc > const_scrollMClose) {
            $('.top_h').removeClass('h').addClass('show');
            $('#expanded_header').addClass('h').removeClass('show');
        } else {
            $('.top_h').removeClass('show').addClass('h');
            $('#expanded_header').removeClass('h').addClass('show');
        }
    }
}



function remove() {
    $(".mn").each(function () {
        $(this).removeClass("current");


    });

    $(".sm").each(function () {
        if ($(this).hasClass('open')) {
            $(this).removeClass('current');
            $(this).removeClass('show').addClass('hide');
            $(this).removeClass('open');

            sMenuIsOpen = false;

        } else {
            $(this).addClass('current');
            sMenuIsOpen = true;
            $('.sm' + i).addClass('current');
            $('.sm' + i).removeClass('hide').addClass('show');
            $('.sm' + i).addClass('open');
            //moveBotCollectionImg();
        }
    });
}

function close() {
    $(".mn").each(function () {
        $(this).removeClass("current");

    });

    $(".sm").each(function () {
        $(this).removeClass('current');
        $(this).removeClass('show').addClass('hide');
        $(this).removeClass('open');
        //moveBotCollectionImg();
        //moveTopCollectionImg();
        sMenuIsOpen = false;
    });
}


$("#pagecontent").scroll(function () {
    var sc = $(this).scrollTop();
    if (sMenuIsOpen) {
        scrollControll(sc, true);
    } else {
        scrollControll(sc, false);
    }



});


function moveTopCollectionImg() {

    if (typeof _c !== 'undefined') {
        console.log(_c);
        $('#wrap_products').removeClass('w_top');
    }

}

function moveBotCollectionImg() {

    if (typeof _c !== 'undefined') {
        console.log(_c);
        $('#wrap_products').addClass('w_top');
    }

}




$('.mn').on("mouseenter", function () {

    if (Pil.haveTouch()) {
        return;
    }
    self = $(this);
    var u = $(this).attr("u");
    var url = $(this).attr("href");

    i = $(this).attr("i");

    var a = 0;
    if (u === '#') {
        remove();
    } else {
        close();
    }

});

$('.msb').on("mouseleave", function () {
    if (Pil.haveTouch()) {
        return;
    }

    remove();
    close();
});




$('.mn').on("click", function () {

    var url = $(this).attr("isLink");
    if (url === '#') {
        return false;
    }
});




$('.lik_language').on("click", function () {

    if ($(this).hasClass("close")) {
        $(this).removeClass("close");
        $('.language').removeClass("hide");
        setTimeout(function () {
            $('.language').css({
                'opacity': '1'
            });
        }, 50);
    } else {
        $(this).addClass("close");
        $('.language').addClass("hide");
        $('.language').css({
            'opacity': '0'
        });
    }

    return false;
});

//POPUP LOGIN

$('.lnk_h_download').on("click", function () {

    if (session) {
        
        $('#wrap_login_download').css({
            'display': 'none'
        });
        
        
    } else {
        
        $('#wrap_login_download').css({
            'display': 'block'
        });
        return false;
    }
    
    return false;

   
});


$('.close_pop').on("click", function () {

    $('#wrap_login_download').css({
        'display': 'none'
    });

    return false;
});


$('.mns.s4').on("click", function () {
	var pos = $('#header .sub_menu .mns.s4').position();
	jQuery('#header .sub_menu').toggleClass('tre');
	jQuery('.sub_tre').css({
		'left':pos.left+'px'
	});
	$('.mnst.accessori').toggleClass('hide');
	return false;
});






